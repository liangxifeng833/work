@startuml
title 撤管状态图

[*] --> 预撤管状态: 检查合同到期\n30天内的合同\n定时任务处理
	预撤管状态:  合同状态 = 预撤管	
	预撤管状态:  物业资源状态 = 预撤管	
	预撤管状态:  展位状态 = 预撤管			

 预撤管状态 --> 撤管状态:已生效的合同到期\n定时任务处理
	撤管状态 : 合同状态 = 已解约
	撤管状态: 物业资源状态 = 空闲
	撤管状态 : 展位状态 = 空闲	
	
[*] --> 申请撤管: 已生效的合同未到期
	申请撤管:通知表状态 =  未审核
	申请撤管:撤销合同表状态 = 未审核	
	
申请撤管 --> 审批通过: 领导全部审批通过	
	审批通过:通知表状态 =  已审
	审批通过:撤销合同表状态 =  已审
	审批通过 --> 预撤管状态

撤管状态 -> 云平台
	 云平台: 解除商户, 物业资源 与 商品库的关系
	 云平台: 改变共有库商品状态
云平台 --> [*]



@enduml